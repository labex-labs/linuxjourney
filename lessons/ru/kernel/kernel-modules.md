---
index: 6
lang: "ru"
title: "Модули ядра"
meta_title: "Модули ядра - Ядро"
meta_description: "Узнайте о модулях ядра Linux: как их загружать, выгружать и управлять ими. Изучите команды `modprobe` и `lsmod` для расширения функциональности ядра. Начните свое путешествие по Linux!"
meta_keywords: "Модули ядра Linux, modprobe, lsmod, управление ядром, учебник по Linux, Linux для начинающих, руководство по Linux"
---

## Lesson Content

Допустим, у меня есть отличная машина; я вкладываю в нее много времени и денег. Я добавляю спойлер, фаркоп, багажник для велосипедов и другие случайные вещи. Эти компоненты на самом деле не меняют основную функциональность автомобиля, и я могу очень легко их снимать и добавлять. Ядро использует ту же концепцию с модулями ядра.

Само по себе ядро является монолитным программным обеспечением. Когда мы хотим добавить поддержку нового типа клавиатуры, мы не пишем этот код непосредственно в код ядра. Точно так же, как мы не стали бы приваривать багажник для велосипедов к нашей машине (ну, может быть, некоторые люди так бы и сделали). Модули ядра — это части кода, которые могут быть загружены и выгружены в ядро по требованию. Они позволяют нам расширять функциональность ядра, фактически не добавляя к основному коду ядра. Мы также можем добавлять модули и не перезагружать систему (в большинстве случаев).

### View a list of currently loaded modules

```bash
lsmod
```

### Load a module

```bash
sudo modprobe bluetooth
```

`modprobe` загружает модуль из `/lib/modules/(kernel version)/kernel/drivers`. Модули ядра также могут иметь зависимости; `modprobe` загружает зависимости нашего модуля, если они еще не загружены.

### Remove a module

```bash
sudo modprobe -r bluetooth
```

### Load on bootup

Вы также можете загружать модули во время загрузки системы, вместо того чтобы временно загружать их с помощью `modprobe` (которые будут выгружены при перезагрузке). Просто измените каталог `/etc/modprobe.d` и добавьте в него файл конфигурации следующим образом:

```plaintext
pete@icebox:~$ /etc/modprobe.d/peanutbutter.conf

options peanut_butter type=almond
```

Немного необычный пример, но если у вас был модуль с именем `peanut_butter` и вы хотели добавить параметр ядра для `type=almond`, вы можете загрузить его при запуске, используя этот файл конфигурации. Также обратите внимание, что модули ядра имеют свои собственные параметры ядра, поэтому вам нужно будет прочитать о конкретном модуле, чтобы узнать больше.

### Do not load on bootup

Вы также можете убедиться, что модуль не загружается при загрузке, добавив файл конфигурации следующим образом:

```plaintext
pete@icebox:~$ /etc/modprobe.d/peanutbutter.conf

blacklist peanut_butter
```

## Exercise

Выгрузите свой модуль Bluetooth с помощью `modprobe` и посмотрите, что произойдет. Как вы это исправите?

## Quiz Question

Какая команда используется для выгрузки модуля?

## Quiz Answer

modprobe -r
