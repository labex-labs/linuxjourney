---
lang: "ru"
title: "Системные вызовы"
description: "Узнайте о системных вызовах Linux (syscalls) и их взаимодействии с ядром. Разберитесь в пользовательском режиме и режиме ядра, а также используйте `strace` для отладки. Начните свое путешествие по Linux!"
keywords: "Системные вызовы Linux, syscalls, режим ядра, пользовательский режим, команда strace, учебник по Linux, Linux для начинающих, руководство по Linux"
---

## Lesson Content

Помните Бритни из предыдущего урока? Допустим, мы хотим увидеться с ней и выпить вместе. Как нам попасть из толпы людей, стоящих снаружи, в ее ближайший круг? Мы бы использовали системные вызовы. Системные вызовы похожи на VIP-пропуска, которые ведут вас к секретной боковой двери, ведущей прямо к Бритни.

Системные вызовы (syscalls) предоставляют процессам пользовательского пространства способ запросить у ядра выполнение чего-либо для нас. Ядро делает определенные службы доступными через API системных вызовов. Эти службы позволяют нам читать или записывать в файл, изменять использование памяти, изменять нашу сеть и т.д. Количество служб фиксировано, поэтому вы не можете добавлять системные вызовы как попало. Ваша система уже имеет таблицу существующих системных вызовов, и каждый системный вызов имеет уникальный ID.

Я не буду вдаваться в специфику системных вызовов, так как для этого вам потребуется немного знать C, но основы заключаются в том, что когда вы вызываете программу, такую как `ls`, код внутри этой программы содержит обертку системного вызова (то есть еще не сам системный вызов). Внутри этой обертки он вызывает системный вызов, который выполнит ловушку (trap). Эта ловушка затем перехватывается обработчиком системных вызовов, который затем ссылается на системный вызов в таблице системных вызовов. Допустим, мы пытаемся вызвать системный вызов `stat()`; он идентифицируется по syscall ID, и назначение системного вызова `stat()` состоит в запросе статуса файла. Теперь помните, вы запускали программу `ls` в непривилегированном режиме. Итак, теперь она видит, что вы пытаетесь сделать syscall, затем она переключает вас в режим ядра (kernel mode). Там она делает много вещей, но самое главное, она ищет ваш номер syscall, находит его в таблице на основе syscall ID, а затем выполняет функцию, которую вы хотели запустить. Как только это будет сделано, она вернется в пользовательский режим (user mode), и ваш процесс получит статус возврата, если он был успешным или если произошла ошибка. Внутреннее устройство syscalls становится очень подробным; я бы порекомендовал поискать информацию в интернете, если вы хотите узнать больше.

Вы можете фактически просмотреть системные вызовы, которые делает процесс, с помощью команды `strace`. Команда `strace` полезна для отладки того, как выполнялась программа.

```bash
strace ls
```

## Exercise

No exercises for this lesson.

## Quiz Question

Что используется для переключения из пользовательского режима в режим ядра?

## Quiz Answer

System call
