---
index: 2
lang: "ru"
title: "lsof и fuser"
meta_title: "lsof и fuser - Использование процессов"
meta_description: "Узнайте, как использовать команды lsof и fuser в Linux для определения процессов, использующих файлы. Разберитесь с ошибками «Устройство или ресурс занят» и эффективно управляйте открытыми файлами."
meta_keywords: "lsof, fuser, команды Linux, открытые файлы, управление процессами, учебник Linux, руководство для начинающих, устройство занято"
---

## Lesson Content

Допустим, вы подключили USB-накопитель и начали работать с файлами. Закончив работу, вы попытались отмонтировать USB-устройство и получили ошибку: «Устройство или ресурс занят». Как узнать, какие файлы на USB-накопителе все еще используются? Для этого можно использовать два инструмента:

### lsof

Помните, что файлы — это не только текстовые файлы, изображения и т. д.; это все в системе: диски, каналы, сетевые сокеты, устройства и т. д. Чтобы увидеть, что используется процессом, вы можете использовать команду `lsof` (сокращение от «list open files» — «список открытых файлов»). Она покажет вам список всех открытых файлов и связанных с ними процессов.

```bash
pete@icebox:~$ lsof .
COMMAND    PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
lxsession 1491 pete  cwd    DIR    8,6     4096  131 .
update-no 1796 pete  cwd    DIR    8,6     4096  131 .
nm-applet 1804 pete  cwd    DIR    8,6     4096  131 .
indicator 1809 pete  cwd    DIR    8,6     4096  131 .
xterm     2205 pete  cwd    DIR    8,6     4096  131 .
bash      2207 pete  cwd    DIR    8,6     4096  131 .
lsof      5914 pete  cwd    DIR    8,6     4096  131 .
lsof      5915 pete  cwd    DIR    8,6     4096  131 .
```

Теперь я могу видеть, какие процессы в данный момент удерживают устройство/файл открытым. В нашем примере с USB вы также можете завершить эти процессы, чтобы отмонтировать этот надоедливый диск.

### fuser

Еще один способ отслеживания процесса — это команда `fuser` (сокращение от «file user» — «пользователь файла»). Она покажет вам информацию о процессе, который использует файл, или о пользователе файла.

```bash
pete@icebox:~$ fuser -v .
                     USER        PID ACCESS COMMAND
/home/pete:         pete  1491 ..c.. lxsession
                     pete  1796 ..c.. update-notifier
                     pete  1804 ..c.. nm-applet
                     pete  1809 ..c.. indicator-power
                     pete  2205 ..c.. xterm
                     pete  2207 ..c.. bash
```

Мы видим, какие процессы в настоящее время используют наш каталог `/home/pete`. Инструменты `lsof` и `fuser` очень похожи. Ознакомьтесь с этими инструментами и попробуйте использовать их в следующий раз, когда вам понадобится отследить файл или процесс.

## Exercise

Практика ведет к совершенству! Вот несколько практических заданий для закрепления вашего понимания управления процессами и устранения конфликтов ресурсов:

1. **[Управление и мониторинг процессов Linux](https://labex.io/ru/labs/comptia-manage-and-monitor-linux-processes-590864)** - Попрактикуйтесь во взаимодействии с фоновыми и передними процессами, их проверке с помощью `ps`, мониторинге ресурсов с помощью `top` и их завершении с помощью `kill`. Эта лабораторная работа поможет вам выявить и управлять процессами, которые могут удерживать ресурсы, такие как файлы на USB-накопителе.

Эта лабораторная работа поможет вам применить концепции в реальных сценариях и обрести уверенность в выявлении и управлении системными процессами.

## Quiz Question

Какая команда используется для вывода списка открытых файлов и информации о связанных с ними процессах?

## Quiz Answer

lsof
