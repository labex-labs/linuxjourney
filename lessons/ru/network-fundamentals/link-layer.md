---
index: 8
lang: "ru"
title: "Канальный уровень"
meta_title: "Канальный уровень - Основы сети"
meta_description: "Узнайте о канальном уровне в TCP/IP, как ARP разрешает MAC-адреса и передачу пакетов. Изучите основы сети с помощью этого руководства по сетям Linux."
meta_keywords: "Канальный уровень, ARP, TCP/IP, MAC-адрес, основы сети, сети Linux, для начинающих, руководство"
---

## Lesson Content

В основе модели TCP/IP лежит канальный уровень. Этот уровень зависит от аппаратного обеспечения.

На канальном уровне наш пакет инкапсулируется еще раз в так называемый кадр. Заголовок кадра содержит MAC-адреса источника и назначения наших хостов, контрольные суммы и разделители пакетов, чтобы получатель мог определить, когда пакет заканчивается.

К счастью, мы находимся в одной сети, поэтому нашему пакету не придется путешествовать слишком далеко. Сначала канальный уровень прикрепляет мой исходный MAC-адрес к заголовку кадра, но ему также нужно знать MAC-адрес Патти. Как он это узнает, и как мне его найти, если его нет в Интернете? Мы используем ARP!

### ARP (протокол разрешения адресов)

ARP находит MAC-адрес, связанный с IP-адресом. ARP используется в пределах одной сети. Если бы Патти не была в той же сети, мы бы использовали систему маршрутизации для определения следующего маршрутизатора, который получит пакет, и как только мы оказались бы в той же сети, мы могли бы использовать ARP.

Как только мы оказываемся в одной сети, системы сначала используют таблицу поиска ARP, которая хранит информацию о том, какие IP-адреса связаны с какими MAC-адресами. Если значения там нет, то используется ARP. Затем система отправит широковещательное сообщение в сеть, используя протокол ARP, чтобы выяснить, какой хост имеет IP 10.10.1.4. Широковещательное сообщение — это специальное сообщение, которое отправляется всем хостам в сети (метко названное для отправки широковещательной рассылки). Любая машина с запрошенным IP-адресом ответит ARP-пакетом, содержащим IP-адрес и MAC-адрес.

Теперь, когда у нас есть все необходимые данные — IP-адрес и MAC-адреса — наш канальный уровень пересылает этот кадр через нашу сетевую карту к следующему устройству и находит сеть Патти. Этот шаг немного сложнее, чем я только что объяснил, но мы обсудим более подробную информацию в курсе по маршрутизации.

И вот оно: простая (или не очень простая) передача пакетов по слоям TCP/IP. Имейте в виду, что пакеты не передаются односторонним способом. Мы еще даже не добрались до сети Патти! При прохождении через сети требуется пройти через модель TCP/IP как минимум дважды, прежде чем какие-либо данные будут отправлены или получены. В действительности, этот пакет будет выглядеть примерно так:

### Передача пакетов

1. Пит отправляет Патти электронное письмо: эти данные отправляются на транспортный уровень.
2. Транспортный уровень инкапсулирует данные в заголовок TCP или UDP для формирования сегмента. Сегмент прикрепляет порт TCP или UDP назначения и источника, затем сегмент отправляется на сетевой уровень.
3. Сетевой уровень инкапсулирует TCP-сегмент внутри IP-пакета; он прикрепляет IP-адрес источника и назначения. Затем он маршрутизирует пакет на канальный уровень.
4. Затем пакет достигает физического оборудования Пита и инкапсулируется в кадр. MAC-адреса источника и назначения добавляются в кадр.
5. Патти получает этот кадр данных через свой физический уровень и проверяет каждый кадр на целостность данных, затем деинкапсулирует содержимое кадра и отправляет IP-пакет на сетевой уровень.
6. Сетевой уровень считывает пакет, чтобы найти IP-адрес источника и назначения, который был прикреплен ранее. Он проверяет, совпадает ли его IP-адрес с IP-адресом назначения, что и происходит! Он деинкапсулирует пакет и отправляет сегмент на транспортный уровень.
7. Транспортный уровень деинкапсулирует сегменты, проверяет номера портов TCP или UDP и устанавливает соединение с прикладным уровнем на основе этих номеров портов.
8. Прикладной уровень получает данные от транспортного уровня на указанном порту и представляет их Патти в виде окончательного сообщения электронной почты.

## Exercise

Практика ведет к совершенству! Вот несколько практических заданий для закрепления вашего понимания канального уровня, MAC-адресов и ARP:

1. **[Определение MAC- и IP-адресов в Linux](https://labex.io/ru/labs/linux-identify-mac-and-ip-addresses-in-linux-592731)** - Попрактикуйтесь в использовании команды `ip a` для определения информации о сетевых адресах, включая MAC-адреса, в системе Linux.
2. **[Изучение взаимодействия сетевого уровня с ping и arp в Linux](https://labex.io/ru/labs/linux-explore-network-layer-interaction-with-ping-and-arp-in-linux-592746)** - Узнайте, как команды `ping` и `arp` работают вместе для разрешения IP-адресов в MAC-адреса и понимания взаимодействий сетевого уровня.
3. **[Анализ Ethernet-кадров с помощью tcpdump в Linux](https://labex.io/ru/labs/linux-analyze-ethernet-frames-with-tcpdump-in-linux-592765)** - Получите практический опыт захвата и проверки Ethernet-кадров, включая MAC-адреса, для понимания низкоуровневых сетевых коммуникаций.

Эти лабораторные работы помогут вам применить концепции в реальных сценариях и укрепить уверенность в основах сети на канальном уровне.

## Quiz Question

Что используется для поиска MAC-адреса в той же сети?

## Quiz Answer

ARP
