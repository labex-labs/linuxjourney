---
index: 4
lang: "ru"
title: "netstat"
meta_title: "netstat - Устранение неполадок"
meta_description: "Изучите команду netstat для анализа сети Linux. Разберитесь в сетевых соединениях, портах и сокетах с помощью этого руководства для начинающих."
meta_keywords: "netstat, команда netstat, сеть Linux, сетевые соединения, учебник Linux, для начинающих, руководство"
---

## Lesson Content

### Известные порты

Мы обсуждали передачу данных через порты на нашей машине; давайте рассмотрим некоторые известные порты.

Вы можете получить список известных портов, просмотрев файл **/etc/services**:

```plaintext
ftp             21/tcp
ssh             22/tcp
smtp            25/tcp
domain          53/tcp  # DNS
http            80/tcp
https           443/tcp
..etc..
```

Первый столбец — это имя службы, затем номер порта и используемый протокол транспортного уровня.

### netstat

Чрезвычайно полезный инструмент для получения подробной информации о вашей сети — это **netstat**. Netstat отображает различную сетевую информацию, такую как сетевые соединения, таблицы маршрутизации, информацию о сетевых интерфейсах и многое другое; это швейцарский армейский нож среди сетевых инструментов. Мы сосредоточимся в основном на одной функции netstat — статусе сетевых соединений. Прежде чем мы рассмотрим пример, давайте сначала поговорим о сокетах и портах. Сокет — это интерфейс, который позволяет программам отправлять и получать данные, в то время как порт используется для идентификации того, какое приложение должно отправлять или получать данные. Адрес сокета — это комбинация IP-адреса и порта. Каждое соединение между хостом и назначением требует уникального сокета. Например, HTTP — это служба, которая работает на порту 80; однако у нас может быть много HTTP-соединений, и для поддержания каждого соединения создается сокет для каждого соединения.

```bash
pete@icebox:~$ netstat -at
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 icebox:domain           *:*                     LISTEN
tcp        0      0 localhost:ipp           *:*                     LISTEN
tcp        0      0 icebox.lan:44468        124.28.28.50:http       TIME_WAIT
tcp        0      0 icebox.lan:34751        124.28.29.50:http       TIME_WAIT
tcp        0      0 icebox.lan:34604        economy.canonical.:http TIME_WAIT
tcp6       0      0 ip6-localhost:ipp       [::]:*                     LISTEN
tcp6       1      0 ip6-localhost:35094     ip6-localhost:ipp       CLOSE_WAIT
tcp6       0      0 ip6-localhost:ipp       ip6-localhost:35094     FIN_WAIT2
```

Команда `netstat -a` показывает прослушивающие и непрослушивающие сокеты для сетевых соединений; флаг `-t` показывает только TCP-соединения.

Столбцы слева направо следующие:

- **Proto**: Используемый протокол, TCP или UDP.
- **Recv-Q**: Данные, поставленные в очередь на получение.
- **Send-Q**: Данные, поставленные в очередь на отправку.
- **Local Address**: Локально подключенный хост.
- **Foreign Address**: Удаленно подключенный хост.
- **State**: Состояние сокета.

Список состояний сокетов можно найти в manpage, но вот некоторые из них:

- **LISTENING**: Сокет прослушивает входящие соединения. Помните, когда мы устанавливаем TCP-соединение, наш пункт назначения должен нас прослушивать, прежде чем мы сможем подключиться.
- **SYN_SENT**: Сокет активно пытается установить соединение.
- **ESTABLISHED**: Сокет имеет установленное соединение.
- **CLOSE_WAIT**: Удаленный хост завершил работу, и мы ждем закрытия сокета.
- **TIME_WAIT**: Сокет ожидает после закрытия для обработки пакетов, все еще находящихся в сети.

## Exercise

Посмотрите manpage для `netstat` и изучите все функции, которые он предлагает.

## Quiz Question

Какой порт используется для HTTPS?

## Quiz Answer

443
