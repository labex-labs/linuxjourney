---
lang: "ru"
title: "Путь пакета"
meta_title: "Путь пакета - Маршрутизация"
meta_description: "Узнайте, как пакет перемещается внутри и за пределами сети. Разберитесь в IP, MAC, ARP и таблицах маршрутизации для сетевой связи. Начните свой путь в сетевых технологиях Linux!"
meta_keywords: "перемещение пакетов, сетевая связь, ARP, IP-адрес, MAC-адрес, таблица маршрутизации, сетевые технологии Linux, руководство для начинающих"
---

## Lesson Content

### Давайте посмотрим, как пакет перемещается внутри своей локальной сети

1. Сначала локальная машина сравнит IP-адрес назначения, чтобы определить, находится ли он в той же подсети, просмотрев свою маску подсети.
2. При отправке пакетов они должны содержать MAC-адрес источника, MAC-адрес назначения, IP-адрес источника и IP-адрес назначения. На данный момент мы не знаем MAC-адрес назначения.
3. Чтобы добраться до хоста назначения, мы используем ARP для широковещательной рассылки запроса в локальной сети, чтобы найти MAC-адрес хоста назначения.
4. Теперь пакет может быть успешно отправлен!

### Давайте посмотрим, как пакет перемещается за пределы своей сети

1. Сначала локальная машина сравнит IP-адрес назначения. Поскольку он находится за пределами нашей сети, он не видит MAC-адрес хоста назначения. И мы не можем использовать ARP, потому что ARP-запрос является широковещательным для локально подключенных хостов.
2. Итак, наш пакет теперь смотрит в таблицу маршрутизации. Он не знает адрес IP-адреса назначения, поэтому отправляет его шлюзу по умолчанию (другому маршрутизатору). Таким образом, теперь наш пакет содержит наш исходный IP, IP-адрес назначения и исходный MAC; однако у нас нет MAC-адреса назначения. Помните, MAC-адреса достигаются только через одну и ту же сеть. Так что же он делает? Он отправляет ARP-запрос, чтобы получить MAC-адрес шлюза по умолчанию.
3. Маршрутизатор просматривает пакет и подтверждает MAC-адрес назначения, но это не конечный IP-адрес назначения, поэтому он продолжает просматривать таблицу маршрутизации, чтобы переслать пакет на другой IP-адрес, который может помочь пакету продвинуться к месту назначения. Каждый раз, когда пакет перемещается, он удаляет старые MAC-адреса источника и назначения и обновляет пакет новыми MAC-адресами источника и назначения.
4. Как только пакет пересылается в ту же сеть, мы используем ARP для поиска конечного MAC-адреса назначения.
5. В ходе этого процесса наш пакет не изменяет IP-адрес источника или назначения.

## Exercise

No exercises for this lesson.

## Quiz Question

Как мы находим MAC-адрес IP-адреса?

## Quiz Answer

ARP
