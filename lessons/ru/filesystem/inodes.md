---
index: 11
lang: "ru"
title: "Inodes"
meta_title: "Inodes - Файловая система"
meta_description: "Узнайте о Linux inodes, их структуре и о том, как они управляют файлами. Разберитесь с inode numbers и используйте `df -i` и `ls -li` для проверки использования inodes. Начните свой путь в Linux!"
meta_keywords: "Linux inodes, inode tutorial, df -i, ls -li, Linux filesystem, beginner Linux, Linux guide"
---

## Lesson Content

Помните, как наша файловая система состоит из всех наших фактических файлов и базы данных, которая управляет этими файлами? Эта база данных известна как таблица inode.

### Что такое inode?

Inode (индексный узел) — это запись в этой таблице, и она существует для каждого файла. Она описывает все о файле, например:

- File type - обычный файл, каталог, символьное устройство и т.д.
- Owner
- Group
- Access permissions
- Timestamps - mtime (время последней модификации файла), ctime (время последнего изменения атрибутов), atime (время последнего доступа)
- Number of hardlinks к файлу
- Size of the file
- Number of blocks, выделенных файлу
- Pointers к блокам данных файла - самое важное!

По сути, inodes хранят все о файле, кроме filename и самого файла!

### Когда создаются inodes?

При создании файловой системы также выделяется место для inodes. Алгоритмы определяют, сколько места для inodes вам нужно, в зависимости от объема диска и других факторов. Вы, вероятно, когда-то в своей жизни видели ошибки, связанные с нехваткой места на диске. То же самое может произойти и с inodes (хотя это менее распространено); у вас могут закончиться inodes, и, следовательно, вы не сможете создавать больше файлов. Помните, хранение данных зависит как от самих данных, так и от базы данных (inodes).

Чтобы узнать, сколько inodes осталось в вашей системе, используйте команду `df -i`.

### Информация об Inode

Inodes идентифицируются по номерам. Когда файл создается, ему присваивается inode number, и номер присваивается в последовательном порядке. Однако иногда вы можете заметить, что при создании нового файла ему присваивается inode number, который ниже, чем у других. Это потому, что после удаления inodes они могут быть повторно использованы другими файлами. Чтобы просмотреть inode numbers, выполните `ls -li`:

```bash
pete@icebox:~$ ls -li
140 drwxr-xr-x 2 pete pete 6 Jan 20 20:13 Desktop
141 drwxr-xr-x 2 pete pete 6 Jan 20 20:01 Documents
```

Первое поле в этой команде выводит inode number.

Вы также можете просмотреть подробную информацию о файле с помощью `stat`; она также сообщает вам информацию об inode.

```bash
pete@icebox:~$ stat ~/Desktop/
  File: ‘/home/pete/Desktop/’
  Size: 6               Blocks: 0          IO Block: 4096   directory
Device: 806h/2054d      Inode: 140         Links: 2
Access: (0755/drwxr-xr-x)  Uid: ( 1000/   pete)   Gid: ( 1000/   pete)
Access: 2016-01-20 20:13:50.647435982 -0800
Modify: 2016-01-20 20:13:06.191675843 -0800
Change: 2016-01-20 20:13:06.191675843 -0800
 Birth: -
```

### Как inodes находят файлы?

Мы знаем, что наши данные где-то на диске. К сожалению, они, вероятно, не были сохранены последовательно, поэтому мы должны использовать inodes. Inodes указывают на фактические блоки данных ваших файлов. В типичной файловой системе (не все работают одинаково) каждый inode содержит 15 pointers. Первые 12 pointers указывают непосредственно на блоки данных. 13-й pointer указывает на блок, содержащий pointers на другие блоки, 14-й pointer указывает на другой вложенный блок pointers, а 15-й pointer снова указывает на другой блок pointers! Запутанно, я знаю! Причина, по которой это сделано таким образом, заключается в том, чтобы сохранить структуру inode одинаковой для каждого inode, но при этом иметь возможность ссылаться на файлы разных размеров. Если у вас был небольшой файл, вы могли бы найти его быстрее с помощью первых 12 прямых pointers; более крупные файлы можно найти с помощью вложенных pointers. В любом случае, структура inode одинакова.

## Exercise

Observe some inode numbers for different files. Which ones are usually created first?

## Quiz Question

Как узнать, сколько inodes осталось в вашей системе?

## Quiz Answer

df -i
