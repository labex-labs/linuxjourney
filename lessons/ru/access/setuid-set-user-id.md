---
lang: "ru"
title: "Setuid"
meta_description: "Узнайте о разрешениях Linux Setuid (SUID), как они работают и как их изменять. Поймите SUID для безопасного доступа к файлам в Linux."
meta_keywords: "Linux Setuid, SUID, разрешения Linux, chmod, команда passwd, безопасность Linux, Linux для начинающих, учебник по Linux"
---

## Lesson Content

Существует множество случаев, когда обычным пользователям требуется повышенный доступ для выполнения определенных действий. Системный администратор не всегда может быть рядом, чтобы вводить пароль root каждый раз, когда пользователю нужен доступ к защищенному файлу, поэтому существуют специальные биты разрешений файла, позволяющие такое поведение. Set User ID (SUID) позволяет пользователю запускать программу от имени владельца файла программы, а не от своего собственного имени.

Давайте рассмотрим пример:

Допустим, я хочу изменить свой пароль, просто, не так ли? Я просто использую команду `passwd`:

```bash
passwd
```

Что делает команда `passwd`? Она изменяет несколько файлов, но самое главное — она изменяет файл `/etc/shadow`. Давайте на секунду взглянем на этот файл:

```bash
$ ls -l /etc/shadow

-rw-r----- 1 root shadow 1134 Dec 1 11:45 /etc/shadow
```

О, подождите, этот файл принадлежит root? Как это возможно, что мы можем изменять файл, принадлежащий root?

Давайте посмотрим на другой набор разрешений, на этот раз для команды, которую мы запустили:

```bash
$ ls -l /usr/bin/passwd

-rwsr-xr-x 1 root root 47032 Dec 1 11:45 /usr/bin/passwd
```

Вы заметите здесь новый бит разрешения **s**. Этот бит разрешения является SUID. Когда файл имеет это разрешение, он позволяет пользователям, запустившим программу, получать разрешения владельца файла, а также разрешение на выполнение, в данном случае root. Таким образом, по сути, пока пользователь запускает команду `passwd`, он запускает ее от имени root.

Вот почему мы можем получить доступ к защищенному файлу, такому как `/etc/shadow`, когда мы запускаем команду `passwd`. Если бы вы удалили этот бит, вы бы увидели, что не сможете изменить `/etc/shadow` и, следовательно, изменить свой пароль.

### Modifying SUID

Как и обычные разрешения, существует два способа изменения разрешений SUID.

_Symbolic way:_

```bash
sudo chmod u+s myfile
```

_Numerical way:_

```bash
sudo chmod 4755 myfile
```

Как вы можете видеть, SUID обозначается цифрой 4 и добавляется в начало набора разрешений. Вы можете увидеть SUID, обозначенный как заглавная **S**. Это означает, что он по-прежнему делает то же самое, но не имеет разрешений на выполнение.

## Exercise

Посмотрите подробно на разрешения для `/etc/passwd`. Вы заметили что-нибудь еще? Файлы с включенным SUID также легко различимы.

## Quiz Question

Какое число представляет SUID?

## Quiz Answer

4
