---
lang: "ja"
title: "プロセスパーミッション"
description: "Linux のプロセスパーミッション、Real、Effective、Saved User ID について学びます。UID がセキュリティとコマンド実行にどのように影響するかを理解します。今日から学習を始めましょう！"
keywords: "Linux プロセスパーミッション，Real UID, Effective UID, Saved UID, Linux セキュリティ，passwd コマンド，Linux チュートリアル，初心者 Linux"
---

## Lesson Content

少しプロセスのパーミッションについて見ていきましょう。SUID パーミッションビットが有効になっている`passwd`コマンドを実行すると、root としてプログラムが実行されると以前お話ししたのを覚えていますか？それは本当です。しかし、一時的に root になるからといって、他のユーザーのパスワードを変更できるという意味でしょうか？いいえ、幸いなことにできません！

これは、Linux が実装している多くの UID によるものです。すべてのプロセスには 3 つの UID が関連付けられています。

プロセスを起動すると、それを実行したユーザーまたはグループと同じパーミッションで実行されます。これは**effective user ID**として知られています。この UID は、プロセスにアクセス権を付与するために使用されます。したがって、当然ながら、Bob が`touch`コマンドを実行した場合、プロセスは彼として実行され、彼が作成したファイルは彼の所有になります。

**real user ID**と呼ばれる別の UID があります。これはプロセスを起動したユーザーの ID です。これらは、プロセスを起動したユーザーが誰であるかを追跡するために使用されます。

最後の UID は**saved user ID**です。これにより、プロセスは effective UID と real UID の間で切り替えることができます。これは、プロセスが常に昇格された特権で実行されることを望まないため便利です。特定の時に特別な特権を使用するのが良い習慣です。

それでは、`passwd`コマンドをもう一度見て、これらすべてをまとめてみましょう。

`passwd`コマンドを実行すると、あなたの effective UID はあなたのユーザーID になります。ここでは仮に 500 としましょう。しかし、待ってください、`passwd`コマンドには SUID パーミッションが有効になっていることを思い出してください。そのため、実行すると、あなたの effective UID は 0 になります（0 は root の UID です）。これで、このプログラムは root としてファイルにアクセスできます。

少し権力を味わって、Sally のパスワードを変更したいとしましょう。Sally の UID は 600 です。しかし、それはできません。幸いなことに、プロセスにはあなたの real UID、この場合は 500 も含まれています。あなたの UID が 500 であることを知っているため、UID 600 のパスワードを変更することはできません。（もちろん、あなたがマシンのスーパーユーザーであり、すべてを制御および変更できる場合は、これは常に回避されます）。

`passwd`を実行したため、プロセスはあなたの real UID を使用して開始され、ファイルの所有者（effective UID）の UID を保存するため、2 つの間で切り替えることができます。必要がない限り、root アクセスですべてのファイルを変更する必要はありません。

ほとんどの場合、real UID と effective UID は同じですが、`passwd`コマンドのような場合は変更されます。

## Exercise

まだプロセスについては議論していませんが、この変更がリアルタイムで発生する様子を見ることができます。

1. 1 つのターミナルウィンドウを開き、コマンドを実行します：`watch -n 1 "ps aux | grep passwd"`。これは`passwd`プロセスを監視します。
2. 2 番目のターミナルウィンドウを開き、`passwd`を実行します。
3. 最初のターミナルウィンドウを見てください。`passwd`のプロセスが表示されます。プロセス表の最初の列は effective user ID です。なんと、root ユーザーです！

## Quiz Question

どの UID がアクセス権の付与を決定しますか？

## Quiz Answer

effective
