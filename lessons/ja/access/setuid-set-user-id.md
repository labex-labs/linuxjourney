---
index: 5
lang: "ja"
title: "Setuid"
meta_title: "Setuid - パーミッション"
meta_description: "Linux Setuid (SUID) パーミッション、その仕組み、および変更方法について学びます。Linux での安全なファイルアクセスにおける SUID を理解します。"
meta_keywords: "Linux Setuid, SUID, Linux パーミッション，chmod, passwd コマンド，Linux セキュリティ，初心者 Linux, Linux チュートリアル"
---

## Lesson Content

一般ユーザーが何かをするために昇格されたアクセスを必要とするケースはたくさんあります。システム管理者は、ユーザーが保護されたファイルにアクセスするたびに root パスワードを入力するために常にそこにいるわけではないため、この動作を許可するための特別なファイルパーミッションビットがあります。Set User ID (SUID) は、ユーザーがプログラムを自分自身としてではなく、プログラムファイルの所有者として実行することを可能にします。

例を見てみましょう。

パスワードを変更したいとします。簡単ですよね？ `passwd` コマンドを使うだけです。

```bash
passwd
```

`passwd` コマンドは何をしているのでしょうか？いくつかのファイルを変更していますが、最も重要なのは `/etc/shadow` ファイルを変更していることです。そのファイルを少し見てみましょう。

```bash
$ ls -l /etc/shadow

-rw-r----- 1 root shadow 1134 Dec 1 11:45 /etc/shadow
```

あれ、ちょっと待ってください、このファイルは root が所有しているのですか？root が所有するファイルを変更できるのはどうしてでしょうか？

今度は、実行したコマンドの別のパーミッションセットを見てみましょう。

```bash
$ ls -l /usr/bin/passwd

-rwsr-xr-x 1 root root 47032 Dec 1 11:45 /usr/bin/passwd
```

ここに新しいパーミッションビット **s** があることに気づくでしょう。このパーミッションビットは SUID です。ファイルにこのパーミッションが設定されている場合、プログラムを起動したユーザーは、ファイル所有者のパーミッションと実行パーミッション（この場合は root）も取得できます。つまり、ユーザーが `passwd` コマンドを実行している間は、root として実行していることになります。

そのため、`passwd` コマンドを実行すると、`/etc/shadow` のような保護されたファイルにアクセスできるのです。このビットを削除すると、`/etc/shadow` を変更できなくなり、したがってパスワードを変更できなくなることがわかるでしょう。

### SUID の変更

通常のパーミッションと同様に、SUID パーミッションを変更する方法は 2 つあります。

_シンボリックな方法:_

```bash
sudo chmod u+s myfile
```

_数値的な方法:_

```bash
sudo chmod 4755 myfile
```

ご覧のとおり、SUID は 4 で表され、パーミッションセットの前に付加されます。SUID が大文字の **S** で表されているのを見かけるかもしれません。これは、同じことを意味しますが、実行パーミッションがないことを意味します。

## Exercise

練習は完璧をもたらします！ファイルパーミッション、ユーザーグループ、および SUID のような特殊なビットがどのように機能するかを理解することは、Linux システムを管理し、保護するために不可欠です。実践的な経験があなたの知識を確固たるものにするでしょう。

ファイルパーミッションとユーザー管理の理解を深めるための実践的なラボを以下に示します。

1. **[Linux ユーザーグループとファイルパーミッション](https://labex.io/ja/labs/linux-linux-user-group-and-file-permissions-18002)** - ユーザーとグループの作成と管理、ファイルパーミッションの理解、ファイル所有権の操作を練習します。このラボは、SUID が昇格されたアクセスのためにこれらの概念をどのように活用するかを理解するために必要な基礎知識を提供します。

このラボは、実際のシナリオで概念を適用し、Linux のユーザーとファイル管理に自信を持つのに役立ちます。

## Quiz Question

SUID を表す数字は何ですか？

## Quiz Answer

4
