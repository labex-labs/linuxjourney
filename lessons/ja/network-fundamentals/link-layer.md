---
index: 8
lang: "ja"
title: "リンク層"
meta_title: "リンク層 - ネットワークの基本"
meta_description: "TCP/IPのリンク層、ARPがMACアドレスを解決する方法、およびパケットの移動について学びます。このLinuxネットワーキングチュートリアルでネットワークの基礎を理解しましょう。"
meta_keywords: "リンク層，ARP, TCP/IP, MAC アドレス，ネットワークの基礎，Linux ネットワーキング，初心者，チュートリアル"
---

## Lesson Content

TCP/IPモデルの最下層に位置するのがLink Layer です。この層はハードウェアに特化しています。

リンク層では、パケットはさらにフレームと呼ばれるものにカプセル化されます。フレームヘッダーには、ホストの送信元および宛先 MAC アドレス、チェックサム、および受信側がパケットの終了を識別できるようにするためのパケットセパレーターが付加されます。

幸いなことに、私たちは同じネットワーク上にいるため、パケットはそれほど遠くまで移動する必要はありません。まず、リンク層は私の送信元 MAC アドレスをフレームヘッダーに付加しますが、Patty の MAC アドレスも知る必要があります。それはどのようにしてわかるのでしょうか？また、インターネット上にはないので、どうやって見つけるのでしょうか？そこで ARP を使います！

### ARP (Address Resolution Protocol)

ARP は、IP アドレスに関連付けられた MAC アドレスを見つけます。ARP は同じネットワーク内で使用されます。もし Patty が同じネットワーク上にいなかった場合、パケットを受信する次のルーターを決定するためにルーティングシステムを使用し、同じネットワーク上に到達した時点で ARP を使用できます。

同じネットワーク上に到達すると、システムはまず、どの IP アドレスがどの MAC アドレスに関連付けられているかの情報を格納する ARP ルックアップテーブルを使用します。もしその値が存在しない場合、ARP が使用されます。その後、システムは ARP プロトコルを使用して、IP 10.10.1.4 を持つホストを見つけるためにネットワークにブロードキャストメッセージを送信します。ブロードキャストメッセージは、ネットワーク上のすべてのホストに送信される特別なメッセージです（ブロードキャストを送信するために適切に命名されています）。要求された IP アドレスを持つマシンはすべて、IP アドレスと MAC アドレスを含む ARP パケットで応答します。

これで、必要なすべてのデータ（IP アドレスと MAC アドレス）が揃ったので、リンク層はこのフレームをネットワークインターフェースカードを介して次のデバイスに転送し、Patty のネットワークを見つけます。このステップは、私が説明したよりも少し複雑ですが、ルーティングコースでさらに詳しく説明します。

これで、TCP/IP 層を介したシンプル（あるいはそれほどシンプルではない）なパケットの移動が完了しました。パケットがこのように一方通行で移動するわけではないことに注意してください。まだ Patty のネットワークに到達していません！ネットワークを介して移動する場合、データが送受信される前に、少なくとも 2 回 TCP/IP モデルを通過する必要があります。実際には、このパケットの様子は次のようになります。

### Packet Traversal

1. Pete が Patty にメールを送信します。このデータはトランスポート層に送られます。
2. トランスポート層はデータを TCP または UDP ヘッダーにカプセル化してセグメントを形成します。セグメントには宛先および送信元 TCP または UDP ポートが付加され、その後セグメントはネットワーク層に送られます。
3. ネットワーク層は TCP セグメントを IP パケット内にカプセル化し、送信元および宛先 IP アドレスを付加します。その後、パケットをリンク層にルーティングします。
4. パケットは Pete の物理ハードウェアに到達し、フレームにカプセル化されます。送信元および宛先 MAC アドレスがフレームに追加されます。
5. Patty は物理層を介してこのデータフレームを受信し、各フレームのデータ整合性をチェックした後、フレームの内容を非カプセル化し、IP パケットをネットワーク層に送信します。
6. ネットワーク層はパケットを読み取り、以前に付加された送信元および宛先 IP を見つけます。自身の IP が宛先 IP と同じであるかを確認します。同じです！パケットを非カプセル化し、セグメントをトランスポート層に送信します。
7. トランスポート層はセグメントを非カプセル化し、TCP または UDP ポート番号をチェックし、それらのポート番号に基づいてアプリケーション層への接続を確立します。
8. アプリケーション層は、指定されたポートでトランスポート層からデータを受信し、最終的なメールメッセージの形式で Patty に提示します。

## Exercise

No exercises for this lesson.

## Quiz Question

同じネットワーク上で MAC アドレスを見つけるために何が使用されますか？

## Quiz Answer

ARP
