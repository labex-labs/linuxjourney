---
index: 8
lang: "ja"
title: "リンク層"
meta_title: "リンク層 - ネットワークの基礎"
meta_description: "TCP/IPのリンク層、ARPがMACアドレスを解決する方法、パケットの移動について学びます。このLinuxネットワーキングチュートリアルでネットワークの基礎を理解しましょう。"
meta_keywords: "リンク層，ARP, TCP/IP, MAC アドレス，ネットワークの基礎，Linux ネットワーキング，初心者，チュートリアル"
---

## Lesson Content

TCP/IPモデルの最下層には、リンク層があります。この層はハードウェア固有です。

リンク層では、パケットはさらにフレームと呼ばれるものにカプセル化されます。フレームヘッダーには、送信元と宛先の MAC アドレス、チェックサム、および受信側がパケットの終わりを識別できるようにするためのパケット区切りが添付されます。

幸いなことに、私たちは同じネットワーク上にいるため、パケットはそれほど遠くまで移動する必要はありません。まず、リンク層は私の送信元 MAC アドレスをフレームヘッダーに添付しますが、パティの MAC アドレスも知る必要があります。それはどのようにして知るのでしょうか？また、インターネット上にはないので、どうやって見つけるのでしょうか？そこで ARP を使います！

### ARP（アドレス解決プロトコル）

ARP は、IP アドレスに関連付けられた MAC アドレスを見つけます。ARP は同じネットワーク内で使用されます。もしパティが同じネットワーク上にいなかった場合、パケットを受信する次のルーターを決定するためにルーティングシステムを使用し、同じネットワーク上に到達してから ARP を使用します。

同じネットワーク上に到達すると、システムはまず、どの IP アドレスがどの MAC アドレスに関連付けられているかの情報を格納する ARP ルックアップテーブルを使用します。値が存在しない場合、ARP が使用されます。その後、システムは ARP プロトコルを使用してネットワークにブロードキャストメッセージを送信し、IP 10.10.1.4 を持つホストを検索します。ブロードキャストメッセージは、ネットワーク上のすべてのホストに送信される特別なメッセージです（ブロードキャストを送信するために適切に命名されています）。要求された IP アドレスを持つマシンは、IP アドレスと MAC アドレスを含む ARP パケットで応答します。

必要なすべてのデータ（IP アドレスと MAC アドレス）が揃ったので、リンク層はこのフレームをネットワークインターフェースカードを介して次のデバイスに転送し、パティのネットワークを見つけます。この手順は、私が説明したよりも少し複雑ですが、ルーティングコースでさらに詳しく説明します。

そして、これです。TCP/IP 層を介したシンプル（あるいはそれほどシンプルではない）なパケットの移動です。パケットがこのように一方通行で移動するわけではないことに注意してください。まだパティのネットワークに到達していません！ネットワークを介して移動する場合、データが送信または受信される前に、少なくとも 2 回 TCP/IP モデルを通過する必要があります。実際には、このパケットの様子は次のようになります。

### パケットの移動

1. ピートがパティにメールを送信します。このデータはトランスポート層に送信されます。
2. トランスポート層は、データを TCP または UDP ヘッダーにカプセル化してセグメントを形成します。セグメントは宛先と送信元の TCP または UDP ポートを添付し、その後セグメントはネットワーク層に送信されます。
3. ネットワーク層は、TCP セグメントを IP パケット内にカプセル化します。送信元と宛先の IP アドレスを添付します。その後、パケットをリンク層にルーティングします。
4. パケットはピートの物理ハードウェアに到達し、フレームにカプセル化されます。送信元と宛先の MAC アドレスがフレームに追加されます。
5. パティは物理層を介してこのデータフレームを受信し、各フレームのデータ整合性をチェックし、フレームの内容を非カプセル化して IP パケットをネットワーク層に送信します。
6. ネットワーク層はパケットを読み取り、以前に添付された送信元と宛先の IP を見つけます。その IP が宛先 IP と同じであるかを確認します。同じです！パケットを非カプセル化し、セグメントをトランスポート層に送信します。
7. トランスポート層はセグメントを非カプセル化し、TCP または UDP ポート番号をチェックし、それらのポート番号に基づいてアプリケーション層への接続を確立します。
8. アプリケーション層は、指定されたポートでトランスポート層からデータを受信し、最終的なメールメッセージの形式でパティに提示します。

## Exercise

練習は完璧をもたらします！リンク層、MAC アドレス、ARP の理解を深めるための実践的なラボをいくつか紹介します。

1. **[Identify MAC and IP Addresses in Linux](https://labex.io/ja/labs/linux-identify-mac-and-ip-addresses-in-linux-592731)** - `ip a` コマンドを使用して、Linux システム上の MAC アドレスを含むネットワークアドレス情報を識別する練習をします。
2. **[Explore Network Layer Interaction with ping and arp in Linux](https://labex.io/ja/labs/linux-explore-network-layer-interaction-with-ping-and-arp-in-linux-592746)** - `ping` と `arp` コマンドがどのように連携して IP アドレスを MAC アドレスに解決し、ネットワーク層の相互作用を理解するかを学びます。
3. **[Analyze Ethernet Frames with tcpdump in Linux](https://labex.io/ja/labs/linux-analyze-ethernet-frames-with-tcpdump-in-linux-592765)** - `tcpdump` を使用してイーサネットフレーム（MAC アドレスを含む）をキャプチャおよび検査し、低レベルのネットワーク通信を理解する実践的な経験を積みます。

これらのラボは、概念を実際のシナリオに適用し、リンク層でのネットワークの基礎に対する自信を築くのに役立ちます。

## Quiz Question

同じネットワーク上で MAC アドレスを見つけるために何が使用されますか？

## Quiz Answer

ARP
