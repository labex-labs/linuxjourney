---
index: 11
lang: "ja"
title: "Inodes"
meta_title: "Inodes - ファイルシステム"
meta_description: "Linux の inode、その構造、およびファイル管理方法について学びます。inode 番号を理解し、`df -i`と`ls -li`を使用して inode の使用状況を確認します。Linux の学習を始めましょう！"
meta_keywords: "Linux inodes, inode tutorial, df -i, ls -li, Linux filesystem, beginner Linux, Linux guide"
---

## Lesson Content

ファイルシステムが、実際のすべてのファイルと、これらのファイルを管理するデータベースで構成されていることを覚えていますか？このデータベースは inode テーブルとして知られています。

### inode とは？

inode（インデックスノード）は、このテーブルのエントリであり、すべてのファイルに 1 つずつ存在します。ファイルに関するすべてを記述します。例えば、以下のような情報です。

- ファイルタイプ - 通常ファイル、ディレクトリ、文字デバイスなど
- 所有者
- グループ
- アクセス権限
- タイムスタンプ - mtime（最終ファイル変更時刻）、ctime（最終属性変更時刻）、atime（最終アクセス時刻）
- ファイルへのハードリンク数
- ファイルサイズ
- ファイルに割り当てられたブロック数
- ファイルのデータブロックへのポインタ - 最も重要！

基本的に、inode はファイル名とファイル自体を除く、ファイルに関するすべてを保存します！

### inode はいつ作成されますか？

ファイルシステムが作成されると、inode のためのスペースも割り当てられます。アルゴリズムは、ディスクの容量などに応じて、必要な inode スペースの量を決定します。おそらく人生のどこかで、ディスク容量不足のエラーを見たことがあるでしょう。inode についても同様のことが起こり得ます（一般的ではありませんが）。inode が不足し、それ以上ファイルを作成できなくなることがあります。データストレージは、データとデータベース（inode）の両方に依存することを覚えておいてください。

システムに残っている inode の数を確認するには、`df -i`コマンドを使用します。

### Inode 情報

inode は番号で識別されます。ファイルが作成されると、inode 番号が割り当てられ、その番号は連番で割り当てられます。ただし、新しいファイルを作成したときに、他のファイルよりも低い inode 番号が割り当てられることに気づく場合があります。これは、inode が削除されると、他のファイルに再利用される可能性があるためです。inode 番号を表示するには、`ls -li`を実行します。

```bash
pete@icebox:~$ ls -li
140 drwxr-xr-x 2 pete pete 6 Jan 20 20:13 Desktop
141 drwxr-xr-x 2 pete pete 6 Jan 20 20:01 Documents
```

このコマンドの最初のフィールドは inode 番号をリストします。

`stat`コマンドを使用すると、ファイルの詳細情報も確認できます。inode に関する情報も表示されます。

```bash
pete@icebox:~$ stat ~/Desktop/
  File: ‘/home/pete/Desktop/’
  Size: 6               Blocks: 0          IO Block: 4096   directory
Device: 806h/2054d      Inode: 140         Links: 2
Access: (0755/drwxr-xr-x)  Uid: ( 1000/   pete)   Gid: ( 1000/   pete)
Access: 2016-01-20 20:13:50.647435982 -0800
Modify: 2016-01-20 20:13:06.191675843 -0800
Change: 2016-01-20 20:13:06.191675843 -0800
 Birth: -
```

### inode はどのようにファイルを特定しますか？

データはディスク上のどこかに存在することはわかっています。残念ながら、データは連続して保存されていない可能性が高いため、inode を使用する必要があります。inode はファイルの実際のデータブロックを指します。一般的なファイルシステム（すべてが同じように機能するわけではありません）では、各 inode に 15 個のポインタが含まれています。最初の 12 個のポインタはデータブロックを直接指します。13 番目のポインタは、さらに多くのブロックへのポインタを含むブロックを指し、14 番目のポインタは別のネストされたポインタブロックを指し、15 番目のポインタはさらに別のポインタブロックを指します！混乱しますよね！このように行われる理由は、すべての inode で inode 構造を同じに保ちながら、異なるサイズのファイルを参照できるようにするためです。小さなファイルであれば、最初の 12 個の直接ポインタでより早く見つけることができます。大きなファイルは、ポインタのネストを使用して見つけることができます。いずれにしても、inode の構造は同じです。

## Exercise

練習は完璧をもたらします！Linux ファイルシステムとファイル管理の理解を深めるための実践的な演習をいくつか紹介します。

1. **[Linux でのファイルとディレクトリの管理](https://labex.io/ja/labs/comptia-manage-files-and-directories-in-linux-590835)** - ファイルとディレクトリの作成、削除、コピー、移動を練習し、シンボリックリンクとハードリンクの作成と inode の分析を探求します。
2. **[Linux でのファイルシステムのナビゲート](https://labex.io/ja/labs/comptia-navigate-the-filesystem-in-linux-590971)** - `pwd`、`cd`、`ls`などの基本的なシェルコマンドを使用して、Linux ファイルシステムをナビゲートする基本的なスキルを学びます。
3. **[Linux でのファイルとコマンドの検索](https://labex.io/ja/labs/comptia-find-files-and-commands-in-linux-590834)** - `find`、`locate`、`whereis`、`which`、`type`を使用して、Linux でファイルとコマンドを見つけるための重要なテクニックを習得します。

これらの演習は、実際のシナリオで概念を適用し、Linux ファイルシステム管理に自信をつけるのに役立ちます。

## Quiz Question

システムに残っている inode の数を確認するにはどうすればよいですか？

## Quiz Answer

df -i
