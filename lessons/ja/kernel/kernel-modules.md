---
index: 6
lang: "ja"
title: "カーネルモジュール"
meta_title: "カーネルモジュール - カーネル"
meta_description: "Linux カーネルモジュールについて学びましょう。それらをロード、アンロード、管理する方法。カーネル機能を拡張するための `modprobe` および `lsmod` コマンドを理解します。Linux の旅を始めましょう！"
meta_keywords: "Linux カーネルモジュール，modprobe, lsmod, カーネル管理，Linux チュートリアル，初心者 Linux, Linux ガイド"
---

## Lesson Content

もし私が素晴らしい車を持っていたとしましょう。私はそれに多くの時間とお金を費やします。スポイラー、ヒッチ、自転車ラック、その他のランダムなものを追加します。これらのコンポーネントは車のコア機能を実際には変更せず、非常に簡単に取り外したり追加したりできます。カーネルは、カーネルモジュールと同じ概念を使用しています。

カーネル自体はモノリシックなソフトウェアです。新しい種類のキーボードのサポートを追加したい場合、このコードをカーネルコードに直接書き込むことはありません。自転車ラックを車に溶接しないのと同じです（まあ、そうする人もいるかもしれませんが）。カーネルモジュールは、必要に応じてカーネルにロードおよびアンロードできるコードの断片です。これらにより、コアカーネルコードに実際に追加することなく、カーネルの機能を拡張できます。また、モジュールを追加してもシステムを再起動する必要はありません（ほとんどの場合）。

### 現在ロードされているモジュールの一覧を表示する

```bash
lsmod
```

### モジュールをロードする

```bash
sudo modprobe bluetooth
```

`modprobe` は `/lib/modules/(kernel version)/kernel/drivers` からモジュールをロードします。カーネルモジュールには依存関係がある場合もあります。`modprobe` は、まだロードされていない場合、モジュールの依存関係をロードします。

### モジュールを削除する

```bash
sudo modprobe -r bluetooth
```

### 起動時にロードする

`modprobe` で一時的にロードする（再起動時にアンロードされる）代わりに、システム起動時にモジュールをロードすることもできます。`/etc/modprobe.d` ディレクトリを変更し、次のように設定ファイルを追加するだけです。

```plaintext
pete@icebox:~$ /etc/modprobe.d/peanutbutter.conf

options peanut_butter type=almond
```

少し突飛な例ですが、`peanut_butter` という名前のモジュールがあり、`type=almond` のカーネルパラメータを追加したい場合、この設定ファイルを使用して起動時にロードさせることができます。また、カーネルモジュールには独自のカーネルパラメータがあるため、詳細についてはモジュールについて具体的に読むことをお勧めします。

### 起動時にロードしない

次のように設定ファイルを追加することで、モジュールが起動時にロードされないようにすることもできます。

```plaintext
pete@icebox:~$ /etc/modprobe.d/peanutbutter.conf

blacklist peanut_butter
```

## Exercise

練習は完璧をもたらします！Linux カーネルモジュールの理解を深めるための実践的なラボです。

1. **[Linux でカーネルモジュールを管理する](https://labex.io/ja/labs/comptia-manage-kernel-modules-in-linux-590865)** - カーネルモジュールのリスト表示、検査、ロード、アンロード、および起動時の自動ロード設定を練習します。このラボは、実際のシナリオで概念を適用し、カーネルモジュール管理に自信をつけるのに役立ちます。

## Quiz Question

モジュールをアンロードするために使用されるコマンドは何ですか？

## Quiz Answer

modprobe -r
