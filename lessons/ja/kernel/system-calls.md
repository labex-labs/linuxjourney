---
index: 3
lang: "ja"
title: "システムコール"
meta_title: "システムコール - カーネル"
meta_description: "Linux システムコール（syscalls）とそれらがカーネルとどのように相互作用するかを学びます。ユーザーモードとカーネルモードを理解し、デバッグに`strace`を使用します。Linux の旅を始めましょう！"
meta_keywords: "Linux システムコール，syscalls, カーネルモード，ユーザーモード，strace コマンド，Linux チュートリアル，初心者 Linux, Linux ガイド"
---

## Lesson Content

前回のレッスンでブリトニーのことを覚えていますか？彼女に会って一緒に飲みに行きたいとしましょう。群衆の中に立っている状態から、どうやって彼女の最も内側のサークルに入るのでしょうか？システムコールを使います。システムコールは、ブリトニーに直接つながる秘密の脇道にあなたを連れて行く VIP パスのようなものです。

システムコール（syscalls）は、ユーザー空間プロセスがカーネルに何かを要求するための手段を提供します。カーネルは、システムコール API を通じて特定のサービスを利用可能にします。これらのサービスにより、ファイルの読み書き、メモリ使用量の変更、ネットワークの変更などが可能になります。サービスの数は固定されているため、システムコールを無闇に追加することはできません。システムには、どのようなシステムコールが存在するかのテーブルがすでにあり、各システムコールには一意の ID があります。

システムコールの詳細には立ち入りません。それには C 言語の知識が少し必要になるからです。しかし、基本的なことは、`ls`のようなプログラムを呼び出すとき、このプログラム内のコードにはシステムコールラッパーが含まれているということです（まだ実際のシステムコールではありません）。このラッパー内で、トラップを実行するシステムコールが呼び出されます。このトラップはシステムコールハンドラによって捕捉され、システムコールテーブル内のシステムコールを参照します。例えば、`stat()`システムコールを呼び出そうとしているとしましょう。これは syscall ID によって識別され、`stat()`システムコールの目的はファイルのステータスを照会することです。さて、あなたは`ls`プログラムを非特権モードで実行していました。ここで、システムコールを行おうとしていることが認識され、カーネルモードに切り替わります。そこで多くのことが行われますが、最も重要なのは、syscall 番号を検索し、syscall ID に基づいてテーブル内でそれを見つけ、実行したかった関数を実行することです。完了すると、ユーザーモードに戻り、プロセスは成功したかエラーがあったかの戻りステータスを受け取ります。システムコールの内部動作は非常に詳細になります。もっと詳しく知りたい場合は、オンラインの情報を参照することをお勧めします。

プロセスが行うシステムコールは、`strace`コマンドで実際に確認できます。`strace`コマンドは、プログラムがどのように実行されたかをデバッグするのに役立ちます。

```bash
strace ls
```

## Exercise

練習は完璧をもたらします！システムコールの内部動作は複雑ですが、ユーザー空間プログラムがカーネルとどのように相互作用するかを理解することは非常に重要です。この相互作用を把握する最良の方法は、これらの基盤となる操作を実行するコマンドを練習することです。ここでは、システムコールに大きく依存するファイルシステムとの相互作用の理解を深めるための実践的な演習をいくつか紹介します。

1. **[Linux でファイルシステムをナビゲートする](https://labex.io/ja/labs/comptia-navigate-the-filesystem-in-linux-590971)** - `ls`、`cd`、`pwd`などの基本的なコマンドを練習して、Linux ファイルシステム内を移動し、検査します。これにより、カーネルのファイルシステムサービスと直接関わることができます。
2. **[Linux でファイルとディレクトリを管理する](https://labex.io/ja/labs/comptia-manage-files-and-directories-in-linux-590835)** - `mkdir`、`rm`、`cp`、`mv`などのコマンドを使用して、ファイルやディレクトリを作成、削除、コピー、移動する方法を学びます。これらのコマンドはすべて、そのアクションを実行するためにシステムコールを伴います。
3. **[Linux でファイルとコマンドを検索する](https://labex.io/ja/labs/comptia-find-files-and-commands-in-linux-590834)** - `find`、`whereis`、`which`を使用してファイルやコマンドを特定するテクニックを習得し、ユーザーコマンドがファイルシステムと相互作用するためにカーネルサービスをどのように利用しているかをさらに示します。

これらの演習は、ファイルシステムとの相互作用の概念を実際のシナリオに適用し、システムコールに暗黙的に依存する基本的な Linux 操作に自信を持つのに役立ちます。

## Quiz Question

ユーザーモードからカーネルモードへの切り替えには何が使用されますか？

## Quiz Answer

System call
