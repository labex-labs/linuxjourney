---
index: 3
lang: "ja"
title: "システムコール"
meta_title: "システムコール - Kernel"
meta_description: "Linux のシステムコール（syscalls）と、それらがカーネルとどのように相互作用するかを学びます。ユーザーモードとカーネルモードを理解し、デバッグのために`strace`を使用します。Linux の学習を始めましょう！"
meta_keywords: "Linux システムコール，syscalls, カーネルモード，ユーザーモード，strace コマンド，Linux チュートリアル，初心者向け Linux, Linux ガイド"
---

## Lesson Content

前回のレッスンでブリトニーのことを覚えていますか？彼女に会って一緒に飲みに行きたいとしましょう。大勢の人混みの中に立っている状態から、彼女の最も内側のサークルに入るにはどうすればよいでしょうか？システムコールを使います。システムコールは、ブリトニーに直接つながる秘密の脇道に案内してくれる VIP パスのようなものです。

システムコール（syscalls）は、ユーザースペースのプロセスがカーネルに何かを要求するための手段を提供します。カーネルは、システムコール API を通じて特定のサービスを利用可能にします。これらのサービスにより、ファイルの読み書き、メモリ使用量の変更、ネットワークの変更などを行うことができます。サービスの数は固定されているため、システムコールを無闇に追加することはできません。システムには、どのようなシステムコールが存在するかを示すテーブルがすでにあり、各システムコールには一意の ID があります。

システムコールの詳細には立ち入りません。それには C 言語の知識が少し必要になるためです。しかし、基本的なことは、`ls`のようなプログラムを呼び出すとき、このプログラム内のコードにはシステムコールラッパーが含まれているということです（まだ実際のシステムコールではありません）。このラッパー内で、システムコールが呼び出され、トラップが実行されます。このトラップはシステムコールハンドラによって捕捉され、システムコールテーブル内のシステムコールを参照します。例えば、`stat()`システムコールを呼び出そうとしているとしましょう。これは syscall ID によって識別され、`stat()`システムコールの目的はファイルのステータスを照会することです。思い出してください、あなたは非特権モードで`ls`プログラムを実行していました。そこで、システムコールを行おうとしていることが認識されると、カーネルモードに切り替わります。そこで多くのことが行われますが、最も重要なのは、syscall 番号を検索し、syscall ID に基づいてテーブル内でそれを見つけ、実行したい関数を実行することです。完了すると、ユーザーモードに戻り、プロセスは成功したかエラーがあったかの戻りステータスを受け取ります。システムコールの内部動作は非常に詳細になります。もっと詳しく知りたい場合は、オンラインの情報を参照することをお勧めします。

`strace`コマンドを使用すると、プロセスが行うシステムコールを実際に表示できます。`strace`コマンドは、プログラムがどのように実行されたかをデバッグするのに役立ちます。

```bash
strace ls
```

## Exercise

No exercises for this lesson.

## Quiz Question

ユーザーモードからカーネルモードに切り替えるために使用されるものは何ですか？

## Quiz Answer

System call
