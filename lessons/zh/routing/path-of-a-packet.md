---
lang: "zh"
title: "数据包的路径"
description: "了解数据包如何在网络内部和外部传输。理解 IP、MAC、ARP 和路由表在网络通信中的作用。开始您的 Linux 网络之旅！"
keywords: "数据包传输，网络通信，ARP, IP 地址，MAC 地址，路由表，Linux 网络，初学者指南"
---

## Lesson Content

### 让我们看看数据包如何在本地网络中传输

1. 首先，本地机器将通过查看其子网掩码来比较目标 IP 地址，以确定它是否在同一子网中。
2. 发送数据包时，它们需要有源 MAC 地址、目标 MAC 地址、源 IP 地址和目标 IP 地址。此时，我们不知道目标 MAC 地址。
3. 为了到达目标主机，我们使用 ARP 在本地网络上广播请求，以查找目标主机的 MAC 地址。
4. 现在数据包可以成功发送了！

### 让我们看看数据包如何传输到其网络之外

1. 首先，本地机器将比较目标 IP 地址。由于它在我们的网络之外，它看不到目标主机的 MAC 地址。而且我们不能使用 ARP，因为 ARP 请求是向本地连接的主机广播的。
2. 所以我们的数据包现在查看路由表。它不知道目标 IP 的地址，所以它将其发送到默认网关（另一个路由器）。所以现在我们的数据包包含我们的源 IP、目标 IP 和源 MAC；但是，我们没有目标 MAC。请记住，MAC 地址只能通过同一网络访问。那么它该怎么做呢？它发送 ARP 请求以获取默认网关的 MAC 地址。
3. 路由器查看数据包并确认目标 MAC 地址，但它不是最终的目标 IP 地址，所以它继续查看路由表，将数据包转发到另一个可以帮助数据包到达目的地的 IP 地址。每次数据包移动时，它都会剥离旧的源和目标 MAC 地址，并用新的源和目标 MAC 地址更新数据包。
4. 一旦数据包被转发到同一网络，我们使用 ARP 查找最终的目标 MAC 地址。
5. 在此过程中，我们的数据包不会更改源或目标 IP 地址。

## Exercise

No exercises for this lesson.

## Quiz Question

我们如何找到 IP 地址的 MAC 地址？

## Quiz Answer

ARP
