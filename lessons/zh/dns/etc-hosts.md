---
index: 4
lang: "zh"
title: "/etc/hosts"
meta_title: "/etc/hosts - DNS"
meta_description: "了解 Linux 中的 /etc/hosts 文件，它如何将主机名映射到 IP 地址，以及它在 DNS 解析中的作用。理解基本的网络配置。"
meta_keywords: "/etc/hosts, Linux 网络，主机名映射，DNS 解析，Linux 教程，初学者指南"
---

## Lesson Content

在我们的机器实际进行 DNS 查询之前，它首先会在本地机器上查找。

### /etc/hosts

`/etc/hosts` 文件包含一些主机名到 IP 地址的映射。这些字段非常直观：一个用于 IP 地址，一个用于主机名，然后是主机的任何别名。

```plaintext
pete@icebox:~$ cat /etc/hosts
127.0.0.1       localhost
127.0.1.1       icebox
```

您通常会看到您的 localhost 地址在此文件中列为默认值。您还可以通过修改 `/etc/hosts.deny` 或 `/etc/hosts.allow` 文件来管理对主机的访问。但是，如果您注重安全性，这并不是正确的方法，您应该修改您的防火墙规则。

让我们看一个有趣的 `/etc/hosts` 示例。修改文件并添加一行：

```plaintext
123.45.6.7  www.google.com
```

保存文件，现在访问 `www.google.com`。遇到问题了吧？这是因为我们刚刚将 `www.google.com` 映射到了一个完全错误的 IP 地址。由于我们的主机首先在本地查找 IP 地址映射，因此它永远不会到达 DNS 来查找 google.com。

### /etc/resolv.conf

传统上，我们使用一个名为 `/etc/resolv.conf` 的文件来映射 DNS 命名服务器以进行更高效的查找。然而，随着 DNS 的改进，这个文件通常变得无关紧要。事实上，您可以在我的以下示例中看到 `/etc/resolv.conf` 不是手动管理的。请参阅您的特定发行版设置来管理 DNS 命名服务器映射。

```plaintext
conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
nameserver 127.0.1.1
search localdomain
```

## Exercise

熟能生巧！这里有一些动手实验来巩固您对本地主机名解析和 DNS 查询的理解：

1. **[在 Linux 中管理本地主机名解析](https://labex.io/zh/labs/linux-manage-local-hostname-resolution-in-linux-592792)** - 练习编辑 `/etc/hosts` 文件以管理本地主机名解析，这是 DNS 查询之前的关键一步。
2. **[使用 dig 和 nslookup 在 Linux 中查询 DNS 记录](https://labex.io/zh/labs/linux-query-dns-records-in-linux-with-dig-and-nslookup-592796)** - 学习使用 `dig` 和 `nslookup` 等基本 Linux 工具查询 DNS 记录，以了解您的机器如何解析外部名称。

这些实验将帮助您在实际场景中应用概念，并增强对主机名解析和 DNS 的信心。

## Quiz Question

在我们的机器上，哪个文件用于将主机名映射到 IP 地址？

## Quiz Answer

/etc/hosts
